---
layout: page
title: Макросы
last_update: 2020-10-23 09:00:00
game_version: 9.0.0 Shadowlands
author: Rodriguezz
toc: true
---

<p style="text-indent: 20px;"> В этом кратком руководстве мы попытаемся рассказать, как создать макросы - от очень простых и популярных до самых сложных, с примерами и пояснениями на каждом этапе, используя все разрешенные нам сокращения для того, чтобы уложится в лимит 255 символов. Во-первых, что такое макрос? Макрос — это маленькая программа, написанная на скриптовом языке, предназначенная для решения следующих (к примеру) задач:</p>
 <ul>
<li>
 Каждый класс в WoW имеет гораздо больше заклинаний, чем может помещаться на панелях команд. Макросы позволяют объединять несколько умений в одну «кнопку» на панели команд, а сами умению будут использоваться с дополнительными модификаторами (клавишами Shift, Alt, Ctrl). Используя макросы, вы можете повесить до 24 заклинаний всего на 6 кнопок.</li>
 <li>Макросы позволяют объединять несколько умений, активируя их нажатием одной кнопки, что может экономить время. Но данная возможность работает, только если не более чем одно из заклинаний имеет время каста или является мгновенным, но имеет гкд (GCD – общее время восстановления).</li>
<li>Также макросы могут выполнять множество других задач, например, рассчитывать эвойденс, если вы танк, или сообщать вам, когда в зоне вашей видимости появился затерянный во времени протодракон, пока вы летите по Грозовой Гряде. (Это достаточно сложные макросы и выходят за рамки нашей темы, но для любопытных они включены для примера в конце)</li>
 </ul>

## Основы

1. Откройте игровое меню, нажав кнопку Esc или щелкнув по соответствующей иконке.
2. В меню выберите «Макросы», после чего вы увидите окно редактора макросов.
3. Для создания макроса нажмите «Создать» внизу окошка.
4. Выберите иконку для макроса. Всегда выбирайте красный знак вопроса <img src="{{ site.url }}/assets/img/guide/questionmark.png" width="20" height="20">, причины будут описаны позже.
5. Введите любое имя для макроса, но оно не может быть слишком длинным. Не называйте макрос так же, как сами умения, например вместо «Вспышка света» напишите вспышкасвета или макросвспышка и т.п.
6. Кликните ОК, теперь вы можете ввести текст макроса в окне редактора. Скопируйте и вставьте туда один из перечисленных ниже примеров, чтобы посмотреть, как он работает.
7. Чтобы сохранить макрос, просто нажмите еще раз «Создать» или выберите в списке один из уже существующих макросов. Кнопки «сохранить» в редакторе, к сожалению нет.
8. Переместите макрос на панель команд, так же как и любой другой спелл. Теперь вы можете активировать его, просто кликнув по нему или нажав назначенную кнопку для данного слота панели команд (для назначения кнопок используйте игровое меню «Назначение клавиш»). Протестируйте работу макроса.
<p style="text-indent: 20px;">Все создаваемые вами макросы сохраняются на сервере Blizzard и привязаны к вашей учетной записи или персонажу, что означает, что вы можете получить к ним  доступ с разных компьютеров. На одной учетной записи может быть сохранено 120 макросов, плюс 18 макросов для каждого персонажа. Макросы учетной записи, как видно из названия, используются всеми вашими персонажами, в то время как макросы персонажей не видны другим персонажам в вашей учетной записи.</p>

## Создание макроса
### Ваш первый макрос

<u>Самый простой макрос</u>

<pre>
<code class="language-less">
#showtooltip
/cast Вспышка Света
</code>
</pre>

><b>#showtooltip</b> заменяет вопрос на иконку используемого нами умения. Красный знак вопроса всегда заменяется на ту иконку, которую задаёт макросу команда <b>#showtooltip</b>.

Вы можете использовать команду /use вместо /cast, чтобы сократить длину большого макроса.
Данный макрос выглядит и работает совершенно так же, как и заклинание <a href="https://ru.wowhead.com/spell=19750">Вспышка Света</a> из книги заклинаний. Поместите его на панель команд и кликните, персонаж скастует вспышку (если конечно вы паладин).<br>
<i>Поскольку данный макрос не имеет никакого дополнительного функционала по сравнению с умением из книги заклинаний, нет смысла использовать его, это только пример.</i>

### Шаблон рабочего макроса

<p style="text-indent: 20px;">Теперь мы создадим более функциональный пример, для начала включающий в себя 4 модификатора. Такой макрос позволяет использовать несколько умений с одной кнопки на панели команд:</p>

<pre>
<code class="language-less">
#showtooltip
/use [mod:ctrl] умение 4;[mod:alt] умение 3;[mod:shift] умение 2;[nomod] умение 1
</code>
</pre>
или без [nomod] в конце макроса, что позволит сократить длину макроса (напоминаем, что для любого макроса максимум составляет 255 символов).
<pre>
<code class="language-less">
#showtooltip
/use [mod:ctrl] умение 4;[mod:alt] умение 3;[mod:shift] умение 2;умение 1
</code>
</pre>

Создайте макрос с 4 вашими умениями по вышеприведенному примеру, затем поместите его на панель. Вместо красного вопроса #showtooltip будет отображать иконку «умения 1», если же вы нажмете Ctrl, то она заменится на «Умение 4» до тех пор, пока Ctrl нажат. Аналогично будет происходить при нажатие Shift или Alt.

Всегда есть возможность ошибки при создании макроса, если вместо иконки одного из умений у вас отображается красный вопрос, значит, вы допустили ошибку.

Вот пример настоящего макроса, на примере умений паладина. Идея данного макроса может использоваться любым классом:
<pre>
<code class="language-less">
#showtooltip
/use [mod:ctrl] Стремительный зеленый грифон;[mod:alt] Стремительный белый рысак;[mod:shift] Свет небес;[nomod] Вспышка света
</code>
</pre>

или без [nomod]

<pre>
<code class="language-less">
#showtooltip
/use [mod:ctrl] Стремительный зеленый грифон;[mod:alt] Стремительный белый рысак;[mod:shift] Свет небес; Вспышка света
</code>
</pre> 
При использование макроса:
<ul>
     <li>Ctrl + макрос, вы увидите иконку грифона, а персонаж по клику начнёт садиться на него.</li>
     <li class="asc-apl" style="display:none;"></li>
     <li>Alt + макрос, отображается иконка Стремительного белого рысака и начнётся его призыв.</li>
     <li class="se-apl" style="display: none;"></li>
	 <li>Shift + макрос, отображается иконка «света небес» и идёт его каст.</li>
     <li class="asc-apl" style="display:none;"></li>
     <li>Макрос без модификаторов будет отображать иконку <a href="https://ru.wowhead.com/spell=19750">Вспышка Света</a>, а нажав его, вы скастуете <a href="https://ru.wowhead.com/spell=19750">Вспышка Света</a>.</li>
     <li class="se-apl" style="display: none;"></li>
</ul>

<p style="text-indent: 20px;">С модификаторами, которые вам труднее всего нажимать, используйте не боевые или редко используемые умения. Для меня лично не очень удобны Ctrl и Shift, там я расположил маунтов. Нажать альт для меня проще, поэтому с ним я использую часто кастуемые заклинания, а без модификаторов самое частое. То есть, создавая макрос, используйте [nomod] для самых важных умений, удобный вам модификатор для менее важных, и остальные для не боевых или очень редких заклинаний.</p>

### Многострочные макросы 

<p style="text-indent: 20px;">Можно создавать макросы, использующие одновременно несколько умений по одному нажатию, только если не более чем одно из заклинаний имеет время каста или является мгновенным, но имеет гкд.Например, создадим макрос, Для мага на использования <a href="https://ru.wowhead.com/spell=190319">Возгорания</a> и акссесуара <a href="https://ru.wowhead.com/item=172669">Жетон падшего гладиатора</a></p>

<pre>
<code class="language-less">
#showtooltip
/use Возгорание
/use Жетон падшего гладиатора
</code>
</pre> 
>Теперь при использовании данного макроса будет использоваться <a href="https://ru.wowhead.com/spell=190319">Возгорание</a> с включенным тринкетом. Если ваше заклинание имеет время каста то оно должно быть на последней строчке.

Еще один простой, но очень полезный пример макроса:
<pre>
<code class="language-less">
/target НикТанка
/assist
</code>
</pre> 
Данный макрос позволяет мгновенно выбрать и начать атаковать цель танка.
<p style="text-indent: 20px;">1я строчка выбирает в цель танка (вам придётся каждый раз вписывать имя текущего танка)</p>
<p style="text-indent: 20px;">2я строчка выберет для вас текущую цель танка.</p>

Однако всегда есть исключения, используйте этот макрос, только если вы бьёте цели без специального приоритета или меток.

### Макросы с модификатором цели

Вы можете также создавать макросы с кастом заклинаний в определенную цель. Для примеров будем использовать умения паладина.

Базовый шаблон, кастует <a href="https://ru.wowhead.com/spell=19750">Вспышка Света</a> в текущую выбранную цель
<pre>
<code class="language-less">
#showtooltip
/use Вспышка света
</code>
</pre> 

модификатор [target=player] или сокращенно [@player] кастует в самого себя:

<pre>
<code class="language-less">
#showtooltip
/use [@player] Вспышка света
</code>
</pre> 

модификатор [target=focus] или [@focus] делает каст в запомненную цель:

<pre>
<code class="language-less">
#showtooltip
/use [@focus] Вспышка света
</code>
</pre> 

модификатор [target=mouseover] или [@mouseover], делает каст в цель, на которую вы наводите мышкой, к примеру, по фрейму игрока в пати:

<pre>
<code class="language-less">
#showtooltip
/use [@mouseover] Вспышка света
</code>
</pre> 

Теперь же объединим все эти макросы в один с использованием модификаторов:

<pre>
<code class="language-less">
#showtooltip
/use [mod:ctrl,@player] Вспышка света;[mod:alt,@focus] Вспышка света;[mod:shift,@mouseover] Вспышка света;[nomod] Вспышка света
</code>
</pre> 

### Большие макросы и скрипты

Вот парочка примеров сложных макросов. Фактически это скрипты, а не макросы, и они являются более сложными, чем все предыдущие примеры. Если вы заинтересовались, то можете посетить сторонние ресурсы, начните с <a href="http://www.wowwiki.com/HOWTO:_Make_a_Macro">http://www.wowwiki.com/HOWTO:_Make_a_Macro</a>.

Друид:
<pre>
<code class="language-less">
/run ChatFrame1:AddMessage(format("Total avoidance: %.2f%%", GetDodgeChance() + 5 + 1/(0.0625 + 0.956/(GetCombatRating(CR_DEFENSE_SKILL)/4.91850*0.04))))
</code>
</pre> 
Паладин:
<pre>
<code class="language-less">
/run ChatFrame1:AddMessage(format("Total avoidance: %.2f%%", GetDodgeChance() + GetParryChance() + 5 + 1/(0.0625 + 0.956/(GetCombatRating(CR_DEFENSE_SKILL)/4.91850*0.04))))
</code>
</pre> 
Воин:
<pre>
<code class="language-less">
/run ChatFrame1:AddMessage(format("Total avoidance: %.2f%%", GetDodgeChance() + GetParryChance() + 5 + 1/(0.0625 + 0.956/(GetCombatRating(CR_DEFENSE_SKILL)/4.91850*0.04))))
</code>
</pre> 
ДК:
<pre>
<code class="language-less">
/run ChatFrame1:AddMessage(format("Avoidance with Stoneskin Gargoyle: %.2f%%", GetDodgeChance() + GetParryChance() + 6 + 1/(0.0625 + 0.956/(floor(GetCombatRatingBonus(CR_DEFENSE_SKILL))*0.04))))
</code>
</pre> 

Макрос для помощи в поиске затерянного во времени:

<pre>
<code class="language-less">
/tar Дирки
/tar Вирагоса
/tar Затерянный
/stopmacro [noexists]
/w СвойНик %t найден!
/run RaidNotice_AddMessage(RaidBossEmoteFrame,"Вот же он! Убей его!", ChatTypeInfo["RAID_WARNING"])
/script PlaySoundFile("Sound\\interface\\RaidWarning.wav")
</code>
</pre> 

## Краткое итого

Создание макроса с модификаторами для разных умений:
<pre>
<code class="language-less">
#showtooltip 
/use [mod:ctrl] умение4;[mod:alt] умение3;[mod:shift] умение2;[nomod] умение1
</code>
</pre> 

Используйте в многострочном макросе не более 1го умения, которое имеет гкд или время каста и только в конце макроса
<pre>
<code class="language-less">
#showtooltip
/use [mod:shift] без-ГКД умение1;[nomod] без-ГКД умение2
/use [mod:shift] без-ГКД умение3;[nomod] без-ГКД умение4
/use [mod:ctrl] умение4 с гкд;[mod:alt] умение3 с гкд;[mod:shift] умение2 с гкд;[nomod] умение1 с гкд
</code>
</pre>
Скопируйте в строку #showtooltip условия из последней строки, для отображения иконок заклинаний
<pre>
<code class="language-less">
#showtooltip 
[mod:ctrl] умение4 с гкд;[mod:alt] умение3 с гкд;[mod:shift] умение2 с гкд;[nomod] умение1 с гкд
/use [mod:shift] без-ГКД умение1;[nomod] без-ГКД умение2
/use [mod:shift] без-ГКД умение3;[nomod] без-ГКД умение4
/use [mod:ctrl] умение4 с гкд;[mod:alt] умение3 с гкд;[mod:shift] умение2 с гкд;[nomod] умение1 с гкд
</code>
</pre>

## Команды чата / эмоций
Эти команды не выполняют никаких действий, поэтому не вызывают боя и имеют только косметическое значение.
<ul>
<li>/e - (или / emote) Печатает сообщение от лица вашего персонажа в чат.</li>
<li>/s - (или / say) Ваш персонаж произнесет сообщение после команды.</li>
</ul>

## Боевые команд

Эти команды выполняют действия, которые в основном используются в макросах, ориентированных на бой.

<ul>
<li>/stopcasting - Немедленно останавливает ваше текущее заклинание или потоковое заклинание, если вы его используете.</li>
<li>/targetlasttarget - изменяет вашу цель на последнюю на которую вы целились.</li>
<li>/cast - произносит заклинание с введенным после него названия из вашей книги заклинаний. (например, /cast Fireball)</li>
>У вас также могут быть модификаторы для произнесения заклинаний, которые будут отображаться между командой /cast и названием вашего заклинания в квадратных скобках ([]). Например /cast [@focus] Kick. У вас может быть несколько модификаторов, связанных запятыми (,), которые должны быть истинными, чтобы они сработали или иметь разные группы модификаторов в разных скобках. Например
</ul> 
<pre>
<code class="language-less">
/cast [@focus,exists,nodead,harm]Fireball
</code>
</pre> 
>Использовать <a href="https://ru.wowhead.com/spell=133">Огненный шар</a> на вашу цель в фокусе, если она существует, если она не мертва и является врагом, в противном случае применение произойдет на вашу текущую цель.

## Модификаторы цели

Добавление модификатора target к вашему макросу изменит вашу текущую цель на указанную, если его условие истинно. @ (читается как 'at') можно заменить на target= в каждой команде.
<ul>
<li><b>@player</b>- нацеливается на игрока.</li>
<li><b>@target</b> - Нацеливается на текущую цель игрока.</li>
<li><b>@mouseover</b> - нацеливает заклинание на цель, над которой в данный момент находится мышь.</li>
<li><b>@cursor</b> - использование заклинание по области, на место в котором в данный момент находиться курсор (доступно только для заклинаний с применением на область, например <a href="https://ru.wowhead.com/spell=32375">Массовое рассеивание</a> или a href="https://ru.wowhead.com/spell=190356">Снежная буря</a>).</li>
<li><b>@focus</b> - Нацеливается на цель которая у вас взята в фокус.</li>
<li><b>@targettarget</b> - Нацеливается на цель цели. Например, при использовании цели на босса, она будет нацелена на танка или на того, кого босс нацелен в этот момент.</li>
<li><b>@boss1</b> - нацеливается на первого босса в списке. Обычно доступно только в подземельях и рейдах. Есть еще варианты, такие как boss2, boss3 и т. Д.</li>
<li><b>@arena1</b> - Нацеливается на первого человека в списке Арены. Это модификатор только для PvP, обычно доступный только во время боев на арене. Есть еще варианты, такие как arena2, arena3 и т. Д.</li>
<li><b>@pet</b> - Нацеливаетесь в питомца игрока.</li>
</ul>

## Условия
Условные выражения можно использовать, чтобы решить, какое действие следует выполнить. Вы можете добавить «no» перед ними, чтобы они вели себя прямо противоположным образом. Например, noharm верно для любой цели, которая не является врагом, но может включать например  нейтральных NPC.
<ul>
<li><b>pet</b> - верно, если у игрока в данный момент нет питомца.</li>
<li><b>combat</b> - верно, если вы в бою.</li>
<li><b>harm</b> - верно, если целью для использования способности является враг.</li>
<li><b>help</b> - верно, если целью для использования способности является союзник.</li>
<li><b>dead</b> - верно, если цель для использования способности мертва.</li>
<li><b>exists</b> - верно, если цель для использования способности существует.</li>
<li><b>channeling</b> - верно, если вы в данный момент используете потоковое  заклинание.</li>
<li><b>button:number</b> - (или btn) используется для проверки, с помощью какой кнопки мыши вы активировали макрос. [button:1] по умолчанию, левая кнопка, [button:2] правая, [кнопка:3] средняя. Для мышей с большим количеством кнопок количество кнопок соответствует шаблону для опции.</li>
<li><b>talent:Row</b>(Строка)/<b>Column</b>(Колонка) - верно, если у вас выбран талант Row/Column. Например, [талант: 7/2] будет верным, если у вас выбранный средний  талант.
</li>
<li><b>equipped:slot</b> - (или надето) верно, если в слоте есть предмет. Например, [equipped:chest] будет верным, если на вас надета нагрудная броня.</li>
<li><b>spec:number</b> - верно, если вы в настоящее время находитесь в специализации, заданной числом. Специализации отсортированы в алфавитном порядке и могут быть проверены в меню специализаций.</li>
<li><b>group</b>  - верно, если вы в данный момент находитесь в группе. Может быть перестроен в [group:party] или [group:raid].</li>
<li><b>indoors</b> - верно, если вы в настоящее время находитесь в локации, которая считается закрытой или помещении.</li>
<li><b>outdoors</b> - верно, если вы в настоящее время находитесь в локации, которая считается на открытом открытой, под открытым небом.</li>
<li><b>flyable</b> - верно, если вы в данный момент можете летать.</li>
<li><b>mounted</b> - верно, если вы в настоящее время на средстве передвижения.</li>
<li><b>fly</b> - верно, если вы в данный момент летите.</li>
<li><b>swimming</b> - верно, если вы в данный момент плаваете.</li>
</ul>

## Модификаторы комбинаций клавиш

<ul>
<li><b>mod:shift</b> - верно, если комбинация клавиш была нажата при нажатой клавише SHIFT.</li>
<li><b>mod:alt</b> - верно, если комбинация клавиш была нажата при нажатой клавише ALT.</li>
<li><b>mod:ctrl</b> - верно, если комбинация клавиш была нажата при нажатой клавише CTRL.</li>
</ul>

## Общие команды
Эти команды можно использовать как в боевых, так и в не боевых ситуациях.

<ul>
<li><b>/run</b> - (или /script) Выполнить скрипт.</li>
<li><b>/use</b> - использует элемент с именем, написанным после команды. Также может использоваться с числами, что заставит его использовать предмет, установленный в слоте за который отвечает это число. Например, /use Зелье длительной силы чтоб использовать зелье или /use 14, чтобы использовать второй аксессуар</li>
<blockquote>Например, /use Зелье длительной силы чтоб использовать зелье или /use 14, чтобы использовать второй аксессуар</blockquote>
</ul>

**Список идентификаторов слотов**

|1 - **Голова**    |   10 - **Руки**|
|2 - **Шея**       |    11 - **Кольцо 1**|
|3 - **Плечо**     |   12 - **Кольцо 2**|
|4 - **Рубашка**   |13 - **Аксессуар 1**|
|5 - **Грудь**     |    14 - **Аксессуар 2**|
|6 - **Пояс**      |     15 - **Плащ**|
|7 - **Ноги**      |     16 - **Основная рука**|
|8 - **Сапоги**    |   17 - **Левая рука**|
|9 - **Запястье**  | 19 - **Гербовая накидка**|

## Больше примеров макросов
Применения вашу способность {{ site.data.spell.Disrupt }} в цель в вашем фокусе,а если в фокусе нет цели то они примерится к цели в вашем таргете.
<pre>
<code class="language-less">
#showtooltip
/cast [@focus,exists][@target] Прерывание
</code>
</pre>

Использует способность в место где находится ваш курсор. На примере {{ site.data.spell.Metamorphosis }}.
<pre>
<code class="language-less">
#showtooltip 
/cast [@cursor] Метаморфоза
</code>
</pre>

Использует способности на место где находится персонаж. На примере {{ site.data.spell.Metamorphosis }}.
<pre>
<code class="language-less">
#showtooltip
/cast [@player] Метаморфоза
</code>
</pre>

Макрос для каста печатей по курсору/под ноги. На примере {{ site.data.spell.Sigil_of_Silence }}.
<pre>
<code class="language-less">
#showtooltip
/use [nomod,@cursor][mod:shift,@Player]Печать немоты; Печать немоты
</code>
</pre>









